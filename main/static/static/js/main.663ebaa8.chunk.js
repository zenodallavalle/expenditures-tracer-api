(this.webpackJsonpexpendituretracer=this.webpackJsonpexpendituretracer||[]).push([[0],{57:function(e,t,n){},58:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(1),a=n.n(i),s=n(17),o=n.n(s),r=n(12),d=n(2),l=(n(57),n(58),n(49)),u=function(e){var t=e.alerts,n=e.onClose;return Object(c.jsx)("div",{children:t.length>0&&t.map((function(e){return Object(c.jsx)(l.a,{variant:e.type,className:"mb-1",onClose:function(){n(e)},dismissible:!0,children:e.body},"alert"+e.id)}))})},j=n(7),h=n(37),b=function(e){var t=e.isLoaded,n=e.onRefresh,i=a.a.useState(t),s=Object(d.a)(i,2),o=s[0],r=s[1];return a.a.useEffect((function(){r(t),setTimeout((function(){r(!1)}),"1500")}),[t]),Object(c.jsx)("button",{className:"mirror btn mr-1 btn-outline-primary",onClick:n,disabled:!t,children:Object(c.jsx)(j.InlineIcon,{icon:h.a,className:o?"spin":""})})},x=n(38),m=n(39),f=function(e){var t=e.isLoaded,n=e.setPanel,i=e.user,a=e.workingDB;return Object(c.jsx)("button",{className:"btn mr-1 btn-outline-"+(i&&a?"primary":"danger"),onClick:function(){n("user",!0)},disabled:!t,children:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.InlineIcon,{icon:x.a}),i?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"mx-1",children:i.username}),Object(c.jsx)(j.InlineIcon,{icon:m.a}),a?Object(c.jsx)("span",{className:"ml-1",children:a.name}):Object(c.jsx)("span",{className:"ml-1",children:"Choose DB"})]}):Object(c.jsx)("span",{className:"ml-1",children:"Please login"})]})})},p=n(18),O=n(40),g=n(41),v=function(e){var t=e.isLoaded,n=e.selectedPanel,i=e.setExpenditureForModal,a=e.setExpenditureModalIsExpected,s=e.setShowCashModal,o=e.setShowExpenditureModal,r=e.setWorkingMonth;return"user"!==n&&Object(c.jsx)("button",{className:"btn btn-outline-primary",disabled:!t,onClick:function(){switch(n){case"prospect":return function(e){s(!0)};case"months":return function(e){var t=new Date,n=t.getMonth()+1,c=t.getFullYear();r((n<10?"0"+n:""+n)+"-"+c)};case"expected":return function(e){e.currentTarget.blur(),i(null),a(!0),o(!0)};case"actual":return function(e){e.currentTarget.blur(),i(null),a(!1),o(!0)};default:return function(){}}}(),children:function(){switch(n){case"prospect":return Object(c.jsx)(j.InlineIcon,{icon:p.a});case"months":return Object(c.jsx)(j.InlineIcon,{icon:g.a});default:return Object(c.jsx)(j.InlineIcon,{icon:O.a})}}()})},N=n(42),y=function(e){var t=e.isLoaded,n=e.onBack;return Object(c.jsx)("button",{className:"btn btn-outline-primary mr-1 ",onClick:function(){n()},disabled:!t,children:Object(c.jsx)(j.InlineIcon,{icon:N.a})})},w=function(e){var t=e.isLoaded,n=e.onBack,i=e.onRefresh,a=e.previousPanel,s=e.selectedPanel,o=e.setExpenditureForModal,r=e.setExpenditureModalIsExpected,d=e.setPanel,l=e.setShowCashModal,u=e.setShowExpenditureModal,j=e.setWorkingMonth,h=e.user,x=e.workingDB;return Object(c.jsx)("div",{className:"fixed-top bg-white safe-fixed-x safe-fixed-top",children:Object(c.jsxs)("div",{className:"row m-0 p-1",children:[Object(c.jsxs)("div",{className:"col-9 text-left p-0",children:[Object(c.jsx)(b,{isLoaded:t,onRefresh:i}),a&&Object(c.jsx)(y,{isLoaded:t,onBack:n}),Object(c.jsx)(f,{isLoaded:t,setPanel:d,user:h,workingDB:x})]}),Object(c.jsx)("div",{className:"col-3 text-right p-0",children:Object(c.jsx)(v,{isLoaded:t,selectedPanel:s,setExpenditureForModal:o,setExpenditureModalIsExpected:r,setShowCashModal:l,setShowExpenditureModal:u,setWorkingMonth:j})})]})})},k=function(e){var t=e.selectedPanel,n=e.setPanel,i=e.isLoaded,a=e.button;return Object(c.jsx)("div",{className:"col text-center pl-0 pr-0",children:Object(c.jsx)("button",{className:"btn btn-sm w-100 "+(t===a.name?"btn-secondary":"btn-outline-secondary"),onClick:function(){n(a.name)},disabled:!i,children:a.display})})},E=function(e){var t=e.isLoaded,n=e.selectedPanel,i=e.setPanel;return Object(c.jsx)("footer",{className:"footer fixed-bottom bg-white safe-fixed-x safe-fixed-bottom",children:Object(c.jsxs)("div",{className:"row pt-1",children:[Object(c.jsx)("div",{className:"col pr-0",style:{maxWidth:2}}),[{name:"prospect",display:"Prospect"},{name:"actual",display:"Actual"},{name:"expected",display:"Expected"},{name:"months",display:"Months"}].map((function(e,a){return Object(c.jsx)(k,{selectedPanel:n,setPanel:i,isLoaded:t,button:e},"button"+a)})),Object(c.jsx)("div",{className:"col pl-0",style:{maxWidth:2}})]})})},S=n(5),T=function(){return new URL(document.location.href).origin};function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/cash/"+t.id+"/",T());fetch(a,{method:"PUT",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}var L=n(30),C=n(43),D=n(44),B=n(45),M=n(64),P=function(e){var t=e.available,n=e.confirmDeleteTimeout,i=e.onShowControlsChanged||function(){},s=e.onEdit||function(){},o=e.onEditFinished,r=e.onDeleteClicked||function(){},l=e.onDeleteTimedOut||function(){},u=e.onDeleteConfirmed||function(){},h=a.a.useState(void 0===e.showExpander||e.showExpander),b=Object(d.a)(h,1)[0],x=a.a.useState(void 0!==e.showControls&&e.showControls),m=Object(d.a)(x,2),f=m[0],O=m[1];a.a.useEffect((function(){O(e.showControls)}),[e.showControls]),a.a.useEffect((function(){i(f)}),[f]);var g=a.a.useState(!1),v=Object(d.a)(g,2),N=v[0],y=v[1],w=a.a.useState(!1),k=Object(d.a)(w,2),E=k[0],S=k[1],T=a.a.useState(null),I=Object(d.a)(T,2),P=I[0],_=I[1],A=function(){f&&y(!1),O(!f)};return Object(c.jsxs)("div",{style:{overflow:"hidden",display:"flex"},children:[b&&Object(c.jsx)(M.a,{in:!N&&!f,enter:!0,timeout:{enter:300,exit:10},classNames:"menu-expander",unmountOnExit:!0,children:Object(c.jsx)("button",{className:"btn btn-sm btn-action",onClick:A,disabled:!t,children:Object(c.jsx)(j.InlineIcon,{icon:D.a})})}),Object(c.jsx)(M.a,{in:f,enter:!0,timeout:{enter:300,exit:100},classNames:"menu-slide",unmountOnExit:!0,children:Object(c.jsxs)("div",{children:[N?null:Object(c.jsx)("button",{className:"btn btn-sm btn-action",onClick:A,children:Object(c.jsx)(j.InlineIcon,{icon:B.a})}),Object(c.jsx)("button",{className:"btn btn-sm btn-action",onClick:function(e){o?N?(y(!1),o(e),O(!1)):(y(!0),s(e)):(A(),s(e))},disabled:!t,children:Object(c.jsx)(j.InlineIcon,{icon:N?L.a:p.a})}),Object(c.jsx)("button",{className:"btn btn-sm btn-action "+(E?"btn-danger":""),onClick:function(e){r(e,E),E?(S(!1),clearTimeout(P),u(e)):(S(!0),n&&_(setTimeout((function(){S(!1),l()}),n)))},disabled:!t,children:Object(c.jsx)(j.InlineIcon,{icon:C.a})})]})})]})},_=void 0,A=function(e){var t=e.addAlert,n=e.authToken,i=e.isLoaded,s=e.setIsLoaded,o=e.setPanel,r=e.setPreviousPanel,l=e.user,u=e.setUser,j=e.isWorkingDB,h=e.setWorkingDB,b=a.a.useState(e.db),x=Object(d.a)(b,2),m=x[0],f=x[1],p=a.a.useState(!1),O=Object(d.a)(p,2),g=O[0],v=O[1];return m?Object(c.jsx)("li",{className:"list-group-item p-3",children:Object(c.jsxs)("div",{className:"clearfix",children:[Object(c.jsx)("button",{className:"float-left select-db btn btn-sm "+(j?" btn-success":" btn-primary")+(i?"":" btn-disable"),onClick:function(){h(null),h(m),t("success","workingDB "+m.name+" correctly set.","1500"),o("prospect"),r(null)},disabled:!i||j,children:j?"Selected":"Select"}),g?Object(c.jsx)("input",{className:"mx-3",type:"text",name:"name",value:m.name,onChange:function(e){var t=Object(S.a)({},m);t[e.target.name]=e.target.value,f(t)}}):Object(c.jsx)("span",{className:"mx-3",children:m.name}),Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)(P,{available:i,show:!1,onEdit:function(){v(!0)},onEditFinished:function(){s(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/dbs/"+t.id+"/",T());fetch(a,{method:"PUT",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}(n,m,(function(e){v(!1),f(m),u(Object(S.a)(Object(S.a)({},l),{},{dbs:l.dbs.map((function(t){return t.id===e.id?e:t}))}))}),(function(e){console.log("Error while editing DB:",e),t("danger","Error while editing DB - "+e,"4000")}),(function(){s(!0)}))},onDeleteConfirmed:function(){f(null),s(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/dbs/"+t.id+"/",T());fetch(a,{method:"DELETE",headers:{Authorization:"Token "+e,"Content-Type":"application/json"}}).then((function(){t.id===parseInt(localStorage.getItem("workingDBId"))&&localStorage.removeItem("workingDBId"),n()}),(function(e){c(e)})).then((function(){i()}))}(n,m,(function(){j&&h(null),u(Object(S.a)(Object(S.a)({},l),{},{dbs:l.dbs.filter((function(e){return e.id!==m.id}))}))}),(function(e){console.log("error while deleting DB:",e),_.addAlert("danger","Error while deleting DB - "+e,"4000")}),(function(){s(!0)}))},confirmDeleteTimeout:4e3})})]})}):null},F=a.a.forwardRef((function(e,t){var n=e.addAlert,i=e.authToken,s=e.isLoaded,o=e.setIsLoaded,l=e.user,u=e.setUser,j=a.a.useState(""),h=Object(d.a)(j,2),b=h[0],x=h[1],m=a.a.useState(!1),f=Object(d.a)(m,2),p=f[0],O=f[1];return Object(c.jsx)("div",{className:"w-100 p-3",children:Object(c.jsxs)("div",{className:"m-1 clearfix",children:[!p&&Object(c.jsx)("button",{className:"btn btn-success w-100 my-0 py-0",onClick:function(){O(!0)},disabled:!s,children:"Add new DB"}),p&&Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("div",{className:"col-sm mb-2",children:Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"DB name",value:b,onChange:function(e){x(e.target.value)},disabled:!s})}),Object(c.jsxs)("div",{className:"col-sm-auto text-center",children:[Object(c.jsx)("button",{className:"btn btn-danger mx-1",onClick:function(){O(!1),x("")},children:"Cancel"}),Object(c.jsx)("button",{className:"btn btn-success mx-1",onClick:function(){o(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new Date("/api/v1/dbs/",T());fetch(a,{method:"POST",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}(i,{name:b},(function(e){O(!1),x(""),u(Object(S.a)(Object(S.a)({},l),{},{dbs:[].concat(Object(r.a)(l.dbs),[e])}))}),(function(e){console.log("Error occurred while adding category:",e),n("danger","Error occurred while adding category - "+e,"4000")}),(function(){o(!0)}))},disabled:!s,children:"Save"})]})]})]})})})),R=function(e){var t=e.addAlert,n=e.authToken,i=e.setAuthData,s=e.isLoaded,o=e.setIsLoaded,r=e.setPanel,l=e.setPreviousPanel,u=e.user,j=e.setUser,h=e.workingDB,b=e.setWorkingDB,x=a.a.useState(""),m=Object(d.a)(x,2),f=m[0],p=m[1],O=a.a.useState(""),g=Object(d.a)(O,2),v=g[0],N=g[1];return u?Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsxs)("h4",{children:["Logged in as ",u.username]}),Object(c.jsxs)("div",{className:"text",children:[Object(c.jsx)("h5",{children:"Available DBs:"}),u.dbs.length>0&&Object(c.jsx)("ul",{className:"list-group",children:u.dbs.map((function(e){return Object(c.jsx)(A,{db:e,isWorkingDB:!!h&&e.id===h.id,addAlert:t,authToken:n,isLoaded:s,setIsLoaded:o,setPanel:r,setPreviousPanel:l,user:u,setUser:j,setWorkingDB:b},"DB"+e.id)}))}),0===u.dbs.length&&Object(c.jsx)("div",{className:"text-center",children:Object(c.jsx)("p",{children:Object(c.jsx)("em",{children:"No databases created yet."})})}),Object(c.jsx)(F,{addAlert:t,authToken:n,isLoaded:s,setIsLoaded:o,user:u,setUser:j})]}),Object(c.jsx)("div",{className:"text-center",children:Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){i({token:null,uId:null}),t("success","User logged out","1500")},disabled:!s,children:"Logout"})})]}):Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)("h4",{children:"Please login"}),Object(c.jsx)("form",{children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"username",children:"Username/email"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"username",placeholder:"username/email",value:f,onChange:function(e){p(e.target.value)},disabled:!s})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"password",value:v,onChange:function(e){N(e.target.value)},disabled:!s})]})]})}),Object(c.jsx)("div",{className:"text-center",children:Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i={username:e,password:t},a=new URL("/api/v1/api-token-auth/",T());fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){"token"in e?n(e):c(e)}),(function(e){c(e)}))}(f,v,(function(e){t("success","Logged in successfully","4000"),i({token:e.token,uId:e.user_id})}),(function(e){var n=e;"non_field_errors"in e&&(n=e.non_field_errors[0]),t("danger","Error - "+n,"4000"),console.error("Error while loggin in:",n)}))},disabled:!s,children:"Login"})})]})},U=function(e){var t=e.category.name;return Object(c.jsx)("div",{className:"w-100 pl-1",children:Object(c.jsx)("div",{className:"text-primary m-1 clearfix",children:Object(c.jsx)("span",{children:t})})})},W=function(e){var t=e.workingDB,n=function(e){return e>0?"text-success":e<0?"text-danger":"text-dark"};return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsxs)("div",{className:"border border-primary rounded my-2",children:[Object(c.jsx)("div",{className:"w-100 text",children:Object(c.jsx)("div",{className:"text-primary m-1 border-primary rounded bg-primary pl-1",children:Object(c.jsx)("div",{className:"text-light",children:"Overall prospect"})})}),Object(c.jsxs)("div",{className:"clearfix m-1 text-center",children:[Object(c.jsxs)("div",{className:"float-left text-justify",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Income"})}),Object(c.jsx)("br",{})]}),t.income]}),Object(c.jsxs)("div",{className:"float-right text-right",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Current money"})}),Object(c.jsx)("br",{})]}),t.current_money.value]})]}),Object(c.jsxs)("div",{className:"clearfix m-1 text-center",children:[Object(c.jsxs)("div",{className:"float-left text-justify",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Expected expenditure"})}),Object(c.jsx)("br",{})]}),t.expected_expenditure]}),Object(c.jsxs)("div",{className:"float-right text-right",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Actual expenditure"})}),Object(c.jsx)("br",{})]}),t.actual_expenditure]}),Object(c.jsxs)("div",{className:"",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Delta"})}),Object(c.jsx)("br",{})]}),Object(c.jsx)("div",{className:n(t.delta_expenditure),children:t.delta_expenditure})]})]}),Object(c.jsxs)("div",{className:"clearfix m-1 text-center",children:[Object(c.jsxs)("div",{className:"float-left text-justify",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Expected saving"})}),Object(c.jsx)("br",{})]}),t.expected_saving]}),Object(c.jsxs)("div",{className:"float-right text-right",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Actual saving"})}),Object(c.jsx)("br",{})]}),t.actual_saving]}),Object(c.jsxs)("div",{className:"",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Delta"})}),Object(c.jsx)("br",{})]}),Object(c.jsx)("div",{className:n(t.delta_saving),children:t.delta_saving})]})]})]},"prospectCell"),0===t.categories.length&&Object(c.jsx)("p",{className:"text-center",children:Object(c.jsxs)("em",{children:["No categories created yet.",Object(c.jsx)("br",{}),"Go to actual or expected expenditure panel and create one."]})}),t.categories.map((function(e){return Object(c.jsxs)("div",{className:"border border-primary rounded my-2 pb-1",children:[Object(c.jsx)(U,{category:e,showEditFunctions:!1}),Object(c.jsxs)("div",{className:"clearfix m-1 text-center",children:[Object(c.jsxs)("div",{className:"float-left text-justify",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Expected"})}),Object(c.jsx)("br",{})]}),e.expected_expenditure]}),Object(c.jsxs)("div",{className:"float-right text-right",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Actual"})}),Object(c.jsx)("br",{})]}),e.actual_expenditure]}),Object(c.jsxs)("div",{className:"",children:[Object(c.jsxs)("span",{className:"text-muted",children:[Object(c.jsx)("small",{children:Object(c.jsx)("em",{children:"Delta"})}),Object(c.jsx)("br",{})]}),Object(c.jsx)("div",{className:n(e.delta),children:e.delta})]})]})]},"categoryprospect"+e.id)}))]})},z=n(46),J=n(47),H=n(36),G=n.n(H),Y=function(e){var t=e.split("-").map((function(e){return parseInt(e)})),n=new Date(t[1],t[0]-1,1,0,0,0);return G()(n,"yyyy - mmm")},V=function(e){var t=new Date(e),n=new Date,c="dddd, mmm dS, yyyy, H:MM";return t.getFullYear()===n.getFullYear()&&(c="dddd, mmm dS, H:MM"),G()(t,c)},q=function(e){var t=e.addAlert,n=e.authToken,i=e.isLoaded,s=e.setIsLoaded,o=e.workingDB,r=e.setWorkingDB,l=e.showEditFunctions,u=a.a.useState(e.category),j=Object(d.a)(u,2),h=j[0],b=j[1],x=a.a.useState(!1),m=Object(d.a)(x,2),f=m[0],p=m[1];return h&&Object(c.jsx)("div",{className:"w-100 pl-1",children:Object(c.jsxs)("div",{className:"text-primary m-1 clearfix",children:[l&&f?Object(c.jsx)("input",{type:"text",name:"name",value:h.name,onChange:function(e){var t=Object(S.a)({},h);t[e.target.name]=e.target.value,b(t)}}):Object(c.jsx)("span",{children:h.name}),l?Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)(P,{available:i,onEdit:function(){p(!0)},onEditFinished:function(){s(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/categories/"+t.id+"/",T());fetch(a,{method:"PUT",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}(n,h,(function(e){p(!1),r(Object(S.a)(Object(S.a)({},o),{},{categories:o.categories.map((function(t){return t.id===e.id?e:t}))}))}),(function(e){console.log("error while editing category",e),t("danger","Error while editing category - "+e,"4000")}),(function(){s(!0)}))},onDeleteConfirmed:function(){s(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/categories/"+t.id+"/",T());fetch(a,{method:"DELETE",headers:{Authorization:"Token "+e,"Content-Type":"application/json"}}).then((function(){n()}),(function(e){c(e)})).then((function(){i()}))}(n,h,(function(e){r(Object(S.a)(Object(S.a)({},o),{},{categories:o.categories.filter((function(e){return h.id!==e.id}))}))}),(function(e){console.log("error while deleting category",e),t("danger","Error while editing deleting - "+e,"4000")}),(function(){s(!0)}))},confirmDeleteTimeout:4e3})}):null]})})},K=function(e){var t=a.a.useState(""),n=Object(d.a)(t,2),i=n[0],s=n[1],o=a.a.useState(!1),l=Object(d.a)(o,2),u=l[0],j=l[1],h=e.addAlert,b=e.authToken,x=e.isLoaded,m=e.setIsLoaded,f=e.workingDB,p=e.setWorkingDB;return Object(c.jsx)("div",{className:"w-100 p-2",children:Object(c.jsxs)("div",{className:"m-1 clearfix",children:[u&&Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("div",{className:"col-sm mb-2",children:Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Category name",value:i,onChange:function(e){s(e.target.value)},disabled:!x})}),Object(c.jsxs)("div",{className:"col-sm-auto text-center",children:[Object(c.jsx)("button",{className:"btn btn-danger mx-1",onClick:function(){j(!1),s("")},children:"Cancel"}),Object(c.jsx)("button",{className:"btn btn-success mx-1",onClick:function(){var e={db:f.id,name:i};m(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/categories/",T());fetch(a,{method:"POST",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then(i())}(b,e,(function(e){j(!1),s(""),p(Object(S.a)(Object(S.a)({},f),{},{categories:[].concat(Object(r.a)(f.categories),[e])}))}),(function(e){console.log("Error occurred while adding category",e),h("danger","Error occurred while adding category - "+e,"4000")}),(function(){m(!0)}))},disabled:!x,children:"Save"})]})]}),!u&&Object(c.jsx)("button",{className:"btn btn-success w-100 my-0 py-0",onClick:function(){j(!0)},disabled:!x,children:"Add new category"})]})})},Q=function(e){var t=window.matchMedia("(hover:hover").matches,n=a.a.useState(t),i=Object(d.a)(n,2),s=i[0],o=i[1],r=a.a.useState(e.expenditure),l=Object(d.a)(r,2),u=l[0],h=l[1],b=e.addAlert,x=e.authToken,m=e.expenditures,f=e.setExpenditures,p=e.isLoaded,O=e.setIsLoaded,g=e.setExpenditureForModal,v=e.setShowExpenditureModal;a.a.useEffect((function(){h(e.expenditure)}),[e.expenditure]);var N=function(e){g(e),v(!0)},y=function(e){O(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/expenditures/"+t.id+"/",T());fetch(a,{method:"DELETE",headers:{Authorization:"Token "+e,"Content-Type":"application/json"}}).then((function(){n()}),(function(e){c(e)})).then((function(){i()}))}(x,e,(function(){f(m.filter((function(t){return t.id!==e.id})))}),(function(e){console.log("Error while deleting expenditure",e),b("danger","Error while deleting expenditure - "+e,"4000")}),(function(){O(!0)}))},w=Object(J.useSwipeable)({onSwipedLeft:function(){o(!0)},onSwipedRight:function(){o(!1)},preventDefaultTouchmoveEvent:!0,trackMouse:!0});return u?Object(c.jsx)("div",{className:"pl-3 pr-1 py-1",children:Object(c.jsxs)("div",Object(S.a)(Object(S.a)({},t?null:w),{},{className:"d-flex align-items-stretch bg-light border border-dark rounded m-0",children:[Object(c.jsxs)("div",{className:"flex-grow-1 pl-1",children:[Object(c.jsx)("div",{className:"text",children:u.name}),Object(c.jsx)("div",{className:"text text-muted",children:V(u.date)}),Object(c.jsx)("div",{className:"text",children:Object(c.jsx)("span",{children:u.value+" \u20ac"})})]}),Object(c.jsxs)("div",{className:"d-flex flex-column",children:[Object(c.jsx)("div",{className:"flex-grow-1 mt-1 mr-1",children:Object(c.jsx)(P,{showExpander:t,showControls:!t&&s,onShowControlsChanged:function(e){o(e)},available:p,onEdit:t?function(e){e.currentTarget.blur(),N(u)}:function(){o(!1),N(u)},onDeleteConfirmed:function(){y(u)},confirmDeleteTimeout:4e3})}),(Boolean(u.expected_expenditure)||u.is_expected&&u.actual_expenditures.length>0)&&Object(c.jsx)("div",{className:"clearfix",children:Object(c.jsx)("div",{className:"float-right mb-1 mr-1",children:Object(c.jsx)("button",{className:"btn btn-small btn-action",children:Object(c.jsx)(j.InlineIcon,{icon:z.a,rotate:135})})})})]})]}))}):null},X=function(e){var t=e.selectedPanel,n=e.addAlert,i=e.authToken,s=e.expenditures,o=e.setExpenditures,r=e.isLoaded,l=e.onRefresh,u=e.setIsLoaded,j=e.workingDB,h=e.setWorkingDB,b=e.workingMonth,x=e.setExpenditureForModal,m=e.setShowExpenditureModal;return Object(c.jsxs)(a.a.Fragment,{children:[0===j.categories.length&&Object(c.jsx)("div",{className:"text text-center",children:Object(c.jsx)("p",{children:Object(c.jsx)("em",{children:"No categories created yet."})})}),j.categories.length>0&&j.categories.map((function(e){var a=[];return s&&(a=s.filter((function(n){return n.is_expected===("expected"===t)&&n.category===e.id&&function(e){if(!b)return!1;var t=b.split("-"),n=Object(d.a)(t,2),c=n[0],i=n[1];c=parseInt(c),i=parseInt(i);var a=new Date(e.date);return c===a.getMonth()+1&&i===a.getFullYear()}(n)}))),Object(c.jsxs)("div",{className:"border border-primary rounded my-2",children:[Object(c.jsx)(q,{category:e,showEditFunctions:!0,addAlert:n,authToken:i,isLoaded:r,setIsLoaded:u,workingDB:j,setWorkingDB:h}),a.length>0?a.map((function(e){return Object(c.jsx)(Q,{expenditure:e,addAlert:n,authToken:i,expenditures:s,setExpenditures:o,isLoaded:r,setIsLoaded:u,workingDB:j,setWorkingDB:h,setExpenditureForModal:x,setShowExpenditureModal:m},"expenditure"+e.category+t+e.id)})):Object(c.jsx)("p",{className:"text-center",children:Object(c.jsx)("em",{children:"No expenditures added yet."})}),Object(c.jsx)("div",{className:"m-1 clearfix",style:{minHeight:10},children:a.length>0&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"float-left",children:a.length+(1!==a.length?" expenditures":" expenditure")}),Object(c.jsxs)("div",{className:"float-right",children:["actual"===t?e.actual_expenditure:e.expected_expenditure," ","\u20ac"]})]})})]},"category"+t+e.id)})),Object(c.jsx)(K,{addAlert:n,authToken:i,isLoaded:r,setIsLoaded:u,workingDB:j,setWorkingDB:h}),Object(c.jsx)("div",{className:"w-100 p-2",children:Object(c.jsx)("button",{className:"btn btn-primary w-100 my-0 py-0",onClick:function(e){!function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},o=new URL("/api/v1/copy-expenditures-from-precedent-month/",T()),r={db__id:t,month:n};Object.keys(r).forEach((function(e){return o.searchParams.append(e,r[e])})),Object.keys(c).forEach((function(e){return o.searchParams.append(e,c[e])})),fetch(o,{method:"GET",headers:{Authorization:"Token "+e}}).then((function(e){return e.json()})).then((function(e){i(e)}),(function(e){a(e)})).then((function(){s()}))}(i,j.id,b,{},(function(){}),(function(){}),(function(){l()}))},children:"Copy precend months expected expenditures"})})]})},Z=function(e){var t=e.month,n=e.isWorkingMonth,i=e.isLoaded,a=e.setWorkingMonth,s=Object(d.a)(t,3),o=s[0],r=s[1],l=s[2];return Object(c.jsx)("li",{className:"list-group-item p-3",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-auto px-1",children:Object(c.jsx)("button",{className:"px-2 py-1 btn btn-sm "+(n?"btn-success":"btn-primary"),disabled:!i||n,onClick:function(){a(o)},children:"Select"})}),Object(c.jsx)("div",{className:"col px-1",children:Y(o)}),Object(c.jsx)("div",{className:"col px-1",children:r}),Object(c.jsx)("div",{className:"col px-1",children:l})]})})},$=function(e){var t=e.isLoaded,n=e.months,i=e.workingMonth,s=e.setWorkingMonth,o=a.a.useState(!1),r=Object(d.a)(o,2),l=r[0],u=r[1];return Object(c.jsxs)("div",{children:[0===n.length&&Object(c.jsx)("p",{className:"text-center",children:Object(c.jsx)("em",{children:"No months to show."})}),n.length>0&&Object(c.jsx)("ul",{className:"list-group",children:n.map((function(e){return Object(c.jsx)(Z,{month:e,isWorkingMonth:i===e[0],isLoaded:t,setWorkingMonth:s},e)}))}),Object(c.jsx)("p",{className:"text-center",children:Object(c.jsxs)("em",{children:[l&&"Months will appear here if they have at least one expenditure or an income registered. ",Object(c.jsx)("a",{href:"#dummy",onClick:function(e){e.preventDefault(),u(!l)},children:l?"Hide":"How do I add months?"})]})})]})},ee=n(65),te=function(e){var t=e.isExpected,n=e.authToken,i=e.expenditures,s=e.setExpenditures,o=e.isLoaded,l=e.setIsLoaded,u=e.setShowExpenditureModal,j=e.workingDB,h=a.a.useState(e.expenditure?function(e){var t=Object(S.a)({},e);return t.category=t.category?t.category:0,t.expected_expenditure=t.expected_expenditure?t.expected_expenditure:0,t.date=t.date.slice(0,-9),t}(e.expenditure):{name:"",value:"",date:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getTime(),n=t-60*e.getTimezoneOffset()*1e3,c=new Date(n);return c.toISOString().slice(0,-8)}(),category:0,is_expected:t,expected_expenditure:0,db:j.id}),b=Object(d.a)(h,2),x=b[0],m=b[1],f=function(e){var t=e.target,n=t.name,c=t.value,a=Object(S.a)({},x);switch(n){case"expected_expenditure":case"category":a[n]=parseInt(c);break;case"date":a[n]=c;break;default:a[n]=c}if("category"===n||"expected_expenditure"===n){var s=i.reduce((function(e,t){return t.is_expected&&t.id===a.expected_expenditure?t:e}),null);s&&s.category!==a.category&&("category"===n?a.expected_expenditure=0:"expected_expenditure"===n&&(a.category=s.category))}m(a)},p=function(){var e=Object(S.a)(Object(S.a)({},x),{},{expected_expenditure:0===x.expected_expenditure?null:x.expected_expenditure,category:0===x.category?null:x.category});"id"in x?(l(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/expenditures/"+t.id+"/",T());fetch(a,{method:"PUT",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}(n,e,(function(e){s(i.map((function(t){return t.id===e.id?e:t}))),u(!1)}),(function(e){console.log("error while adding new expenditure: ",e)}),(function(){l(!0)}))):(l(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/expenditures/",T());fetch(a,{method:"POST",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}(n,e,(function(e){s([].concat(Object(r.a)(i),[e])),u(!1)}),(function(e){console.log("error while adding new expenditure: ",e)}),(function(){l(!0)})))};return Object(c.jsxs)(ee.a,{show:e.show,onHide:function(){u(!1)},size:"xl",children:[Object(c.jsx)(ee.a.Header,{closeButton:!0,children:Object(c.jsx)(ee.a.Title,{children:"id"in x?x.is_expected?"Edit expected expenditure":"Edit actual expenditure":x.is_expected?"Add expected expenditure":"Add actual expenditure"})}),Object(c.jsx)(ee.a.Body,{children:Object(c.jsx)("div",{children:Object(c.jsx)("form",{onSubmit:p,children:Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Description"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",placeholder:"Description",value:x.name,onChange:f})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Value"}),Object(c.jsx)("input",{type:"number",step:.01,className:"form-control",name:"value",placeholder:"\u20ac",value:parseFloat(x.value)?parseFloat(x.value):"",onChange:f})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Date & Time"}),Object(c.jsx)("input",{type:"datetime-local",className:"form-control",name:"date",placeholder:"Date & Time",value:x.date,onChange:f})]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"category",children:"Category"}),Object(c.jsxs)("select",{name:"category",className:"form-control",onChange:f,value:x.category?x.category:0,children:[Object(c.jsx)("option",{value:0,children:"-----"},"categorydefault0"),j.categories.map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.name},"category"+e.id)}))]})]}),x.is_expected?null:Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"expected_expenditure",children:"Expected expenditure"}),Object(c.jsxs)("select",{name:"expected_expenditure",className:"form-control",onChange:f,value:x.expected_expenditure?x.expected_expenditure:0,children:[Object(c.jsx)("option",{value:0,children:"-----"},"expectedexpendituredefault0"),i.filter((function(e){return e.is_expected})).sort((function(e,t){return e.category>t.category?1:e.category<t.category?-1:0})).map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.value.toString()+"\u20ac, "+e.name},"expectedexpenditure"+e.id)}))]})]})]})})})}),Object(c.jsx)(ee.a.Footer,{children:Object(c.jsx)("div",{className:"text-center w-100",children:Object(c.jsx)("button",{className:"btn btn-primary px-5",onClick:p,disabled:!o,children:"Save"})})})]})},ne=n(29),ce=function(e){var t=a.a.useState(!1),n=Object(d.a)(t,2),i=n[0],s=n[1],o=e.authToken,r=e.incomes,l=e.setIncomes,u=e.isLoaded,j=e.setIsLoaded,h=a.a.useState(e.income),b=Object(d.a)(h,2),x=b[0],m=b[1],f=function(e){var t=Object(S.a)({},x);t[e.target.name]=e.target.value,m(t)};return Object(c.jsx)("li",{className:"list-group-item",children:Object(c.jsxs)("div",{className:"clearfix",children:[Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)(P,{available:u,onEdit:function(){s(!0)},onEditFinished:function(){var e=Object(S.a)(Object(S.a)({},x),{},{name:x.name,value:x.value});I(o,e,(function(e){s(!1),l(r.map((function(t){return t.id===e.id?e:t})))}),(function(e){console.log("error while editing income",e)}),(function(){}))},onDeleteConfirmed:function(){j(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/cash/"+t.id+"/",T());fetch(a,{method:"DELETE",headers:{Authorization:"Token "+e,"Content-Type":"application/json"}}).then((function(){n()}),(function(e){c(e)})).then((function(){i()}))}(o,x,(function(){l(r.filter((function(e){return e.id!==x.id})))}),(function(e){console.log("error while deleting income",e)}),(function(){j(!0)}))},confirmDeleteTimeout:4e3})}),Object(c.jsxs)("div",{children:[i?Object(c.jsx)("input",{type:"text",name:"value",value:x.value,onChange:f}):Object(c.jsx)("span",{children:x.value}),Object(c.jsx)("span",{children:" \u20ac"}),Object(c.jsx)("span",{className:"mx-2"}),i?Object(c.jsx)("input",{type:"text",name:"name",value:x.name,onChange:f}):Object(c.jsx)("span",{className:"text-muted",children:Object(c.jsx)("em",{children:x.name})})]})]})})},ie=function(e){var t=a.a.useState(""),n=Object(d.a)(t,2),i=n[0],s=n[1],o=a.a.useState(""),l=Object(d.a)(o,2),u=l[0],j=l[1],h=a.a.useState(!1),b=Object(d.a)(h,2),x=b[0],m=b[1],f=e.authToken,p=e.incomes,O=e.isLoaded,g=e.setIsLoaded,v=e.setIncomes,N=e.workingMonth;return Object(c.jsx)("div",{className:"w-100 p-2",children:Object(c.jsx)("div",{className:"m-1 clearfix",children:x?Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Register new income:"}),Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("div",{className:"col-md mb-2",children:Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("div",{className:"col-sm",children:Object(c.jsx)("input",{type:"number",step:.01,className:"form-control",name:"value",placeholder:"Value",value:u,onChange:function(e){j(e.target.value)},disabled:!O})}),Object(c.jsx)("div",{className:"col-sm",children:Object(c.jsx)("input",{type:"text",className:"form-control",name:"description",placeholder:"Name",value:i,onChange:function(e){s(e.target.value)},disabled:!O})})]})}),Object(c.jsxs)("div",{className:"col-md-auto text-center",children:[Object(c.jsx)("button",{className:"btn btn-danger mx-1",onClick:function(){m(!1),s("")},children:"Cancel"}),Object(c.jsx)("button",{className:"btn btn-success mx-1",onClick:function(){var e=N.split("-").map((function(e){return parseInt(e)})),t=Object(d.a)(e,2),n=t[0],c=t[1],a={db:localStorage.getItem("workingDBId"),name:i,value:u,income:!0,reference_date:new Date(c,n-1,1,0,0,0)};g(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/cash/",T());fetch(a,{method:"POST",headers:{Authorization:"Token "+e,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){"id"in e?n(e):c(e)}),(function(e){c(e)})).then((function(){i()}))}(f,a,(function(e){m(!1),s(""),j(""),v([].concat(Object(r.a)(p),[e]))}),(function(e){console.log("Error occurred while registering income",e)}),(function(){g(!0)}))},disabled:!O,children:"Save"})]})]})]}):Object(c.jsx)("button",{className:"btn btn-success w-100 my-0 py-0",onClick:function(){m(!0)},disabled:!O,children:"Register new income"})})})},ae=function(e){var t=e.show,n=e.authToken,i=e.incomes,s=e.setIncomes,o=e.isLoaded,r=e.setIsLoaded,l=e.setShowActualMoneyOrIncomeModal,u=e.workingDB,h=e.getWorkingDB,b=e.workingMonth,x=a.a.useState(!1),m=Object(d.a)(x,2),f=m[0],O=m[1],g=a.a.useState(u?u.current_money:null),v=Object(d.a)(g,2),N=v[0],y=v[1],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Object(S.a)(Object(S.a)({},N),{},{name:"dummy",value:N.value});r(!1),I(n,t,(function(t){O(!1),e(),h()}),(function(e){console.log("error while editing current_money",e)}),(function(){r(!0)}))};return Object(c.jsxs)(ee.a,{show:t,onHide:function(){l(!1)},size:"xl",children:[Object(c.jsx)(ee.a.Header,{closeButton:!0,children:Object(c.jsx)(ee.a.Title,{children:"Add/edit income/actual money"})}),Object(c.jsxs)(ee.a.Body,{children:[Object(c.jsxs)("div",{className:"mb-2",children:[Object(c.jsx)("h5",{children:"Actual current money:"}),Object(c.jsx)("div",{className:"clearfix",children:Object(c.jsxs)("div",{className:"list-group-item py-3 pr-3 pl-4",children:[Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)("button",{className:"btn btn-sm btn-action p-1 pb-2",onClick:f?function(){w()}:function(){O(!0)},disabled:!o,children:Object(c.jsx)(j.InlineIcon,{icon:f?L.a:p.a})})}),f?Object(c.jsx)("input",{type:"text",name:"value",value:N?N.value:"",onChange:function(e){y(Object(S.a)(Object(S.a)({},N),{},Object(ne.a)({},e.target.name,e.target.value)))}}):Object(c.jsx)("span",{children:N?N.value:"Loading..."}),Object(c.jsx)("span",{children:" \u20ac"}),Object(c.jsx)("span",{className:"text-muted",children:Object(c.jsx)("em",{children:N?f?"":" at "+V(N.date):""})})]})})]}),Object(c.jsx)("h5",{children:Object(c.jsxs)("div",{className:"clearfix",children:[Object(c.jsx)("div",{className:"float-right",children:Object(c.jsxs)("div",{className:"text-dark",children:[u?u.income:""," \u20ac"]})}),Object(c.jsx)("span",{children:"Incomes:"})]})}),i.length>0&&Object(c.jsx)("ul",{className:"list-group",children:i.map((function(e){return Object(c.jsx)(ce,{authToken:n,income:e,incomes:i,setIncomes:s,isLoaded:o,setIsLoaded:r},"income"+e.id)}))}),0===i.length&&Object(c.jsx)("p",{className:"text-center",children:Object(c.jsx)("em",{children:"No incomes registered yet."})}),Object(c.jsx)(ie,{authToken:n,incomes:i,setIncomes:s,isLoaded:o,setIsLoaded:r,workingMonth:b})]}),f&&Object(c.jsx)(ee.a.Footer,{children:Object(c.jsx)("div",{className:"text-center w-100",children:Object(c.jsx)("button",{className:"btn btn-primary px-5",onClick:function(){w((function(){l(!1)}))},children:"Save and close"})})})]})},se=n.p+"static/media/loading256.df1e3eaf.gif",oe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t,n){return t!==e},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t,n){return!0},i=[],s=a.a.useRef(t.map((function(e){return i.push(!0),e}))),o=a.a.useRef(i);a.a.useEffect((function(){t.some((function(e,t){return n(s.current[t],e,o.current[t])}))&&c(s.current,t,o.current)&&e(),t.forEach((function(e,t){s.current[t]=e,o.current[t]&&(o.current[t]=!1)}))}),t)},re=function(e){var t=a.a.useState({token:localStorage.getItem("authToken"),uId:localStorage.getItem("userId")}),n=Object(d.a)(t,2),i=n[0],s=n[1],o=a.a.useState(null),l=Object(d.a)(o,2),j=l[0],h=l[1],b=a.a.useState(null),x=Object(d.a)(b,2),m=x[0],f=x[1],p=a.a.useState(function(){var e=new Date,t=e.getMonth()+1;return(t<10?"0"+t:""+t)+"-"+e.getFullYear()}()),O=Object(d.a)(p,2),g=O[0],v=O[1],N=a.a.useState(null),y=Object(d.a)(N,2),k=y[0],S=y[1],I=a.a.useState(null),L=Object(d.a)(I,2),C=L[0],D=L[1],B=a.a.useState(null),M=Object(d.a)(B,2),P=M[0],_=M[1],A=a.a.useState(!1),F=Object(d.a)(A,2),U=F[0],z=F[1],J=a.a.useState([]),H=Object(d.a)(J,2),G=H[0],Y=H[1],V=a.a.useState("prospect"),q=Object(d.a)(V,2),K=q[0],Q=q[1],Z=a.a.useState(null),ee=Object(d.a)(Z,2),ne=ee[0],ce=ee[1],ie=a.a.useState(!1),re=Object(d.a)(ie,2),de=re[0],le=re[1],ue=a.a.useState(!1),je=Object(d.a)(ue,2),he=je[0],be=je[1],xe=a.a.useState(!1),me=Object(d.a)(xe,2),fe=me[0],pe=me[1],Oe=a.a.useState(null),ge=Object(d.a)(Oe,2),ve=ge[0],Ne=ge[1],ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=function(){return(new Date).getTime()},i={type:e,body:t,id:c()};n>0&&(i.autodismissFunction=function(){Y(G.filter((function(e){return e.id!==i.id})))},i.autodismissTimeout=setTimeout(i.autodismissFunction,n)),Y([].concat(Object(r.a)(G),[i]))},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e!==K&&(ce(t?K&&K!==e?K:"prospect":null),Q(e||"prospect"))},ke=function(){ne&&(we(ne),ce(null))},Ee=function(){i.uId&&i.token&&"null"!==i.uId&&"null"!==i.token?function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},s=new URL("/api/v1/users/"+t+"/",T());s.searchParams.append("month",n),fetch(s,{method:"GET",headers:{Authorization:"Token "+e}}).then((function(e){return e.json()})).then((function(e){"id"in e?c(e):i(e)}),(function(e){i(e)})).then((function(){a()}))}(i.token,i.uId,g,(function(e){h(e)}),(function(e){var t=Object.keys(e).reduce((function(t,n){return t+n+":"+e[n]}),"");console.error("Error while getting user",t),ye("danger","Error while getting current user:"+t,"4000"),we("user")}),(function(){z(!0)})):(z(!0),h(null),we("user"))},Se=function(){var e=localStorage.getItem("workingDBId");j&&(e||1===j.dbs.length)?(z(!1),function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},o=new URL("/api/v1/dbs/"+t+"/",T());o.searchParams.append("month",n),Object.keys(c={}).forEach((function(e){o.searchParams.append(e,c[e])})),fetch(o,{method:"GET",headers:{Authorization:"Token "+e}}).then((function(e){return e.json()})).then((function(e){"id"in e?i(e):a(e)}),(function(e){a(e)})).then((function(){s()}))}(i.token,e||j.dbs[0].id,g,{},(function(e){f(e)}),(function(e){localStorage.removeItem("workingDBId")}),(function(){z(!0)}))):(z(!0),f(null),D(null),S(null),we("user"))},Te=function(){m?(z(!1),function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},o=new URL("/api/v1/expenditures/",T()),r={db__id:t,month:n};Object.keys(r).forEach((function(e){return o.searchParams.append(e,r[e])})),Object.keys(c).forEach((function(e){return o.searchParams.append(e,c[e])})),fetch(o,{method:"GET",headers:{Authorization:"Token "+e}}).then((function(e){return e.json()})).then((function(e){i(e)}),(function(e){a(e)})).then((function(){s()}))}(i.token,m.id,g,{},(function(e){S(e.results)}),(function(e){}),(function(){z(!0)}))):S(null)},Ie=function(){m?(z(!1),function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},o=new URL("/api/v1/cash/",T()),r={db__id:t,month:n};Object.keys(r).forEach((function(e){return o.searchParams.append(e,r[e])})),Object.keys(c).forEach((function(e){return o.searchParams.append(e,c[e])})),fetch(o,{method:"GET",headers:{Authorization:"Token "+e}}).then((function(e){return e.json()})).then((function(e){i(e)}),(function(e){a(e)})).then((function(){s()}))}(i.token,m.id,g,{},(function(e){D(e.results.filter((function(e){return e.income})))}),(function(e){}),(function(){z(!0)}))):D(null)},Le=function(){m?(z(!1),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=new URL("/api/v1/months/",T()),s={db__id:t};Object.keys(s).forEach((function(e){return a.searchParams.append(e,s[e])})),fetch(a,{method:"GET",headers:{Authorization:"Token "+e}}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(e){c(e)})).then((function(){i()}))}(i.token,m.id,(function(e){_(e.results)}),(function(e){}),(function(){z(!0)}))):_(null)};oe((function(){localStorage.setItem("authToken",i.token),localStorage.setItem("userId",i.uId)}),[i],(function(e,t,n){return!n})),oe((function(){localStorage.setItem("workingDBId",m.id)}),[m],(function(e,t,n){return!n&&t})),a.a.useEffect((function(){Ee()}),[i]),oe((function(){Se()}),[j],(function(e,t,n){return!n}),(function(e,t,n){return!t[0]})),oe(Se,[j],(function(e,t,n){return!n}),(function(e,t,n){return t[0]})),oe((function(){Ie(),Te(),Le(),we("prospect")}),[m],(function(e,t,n){return!n&&(!e||!t)})),oe((function(){Ie(),Te(),we("prospect")}),[g],(function(e,t,n){return!n&&e!==t})),oe((function(){Se(),Le()}),[C,k],(function(e,t,n){return!n}),(function(e,t,n){return e[0]&&e[1]}));var Ce=function(){Ee(),Ie(),Te()};return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(w,{isLoaded:U,onBack:ke,onRefresh:Ce,previousPanel:ne,selectedPanel:K,setExpenditureForModal:Ne,setExpenditureModalIsExpected:pe,setPanel:we,setShowCashModal:le,setShowExpenditureModal:be,setWorkingMonth:v,user:j,workingDB:m}),Object(c.jsx)(u,{alerts:G,onClose:function(e){clearTimeout(e.autodismissTimeout),e.autodismissFunction()}}),"user"===K&&Object(c.jsx)(R,{addAlert:ye,authToken:i.token,setAuthData:s,isLoaded:U,onBack:ke,setIsLoaded:z,setUser:h,setPanel:we,setPreviousPanel:ce,workingDB:m,setWorkingDB:f,user:j}),"user"!==K&&Object(c.jsxs)("div",{className:"safe-down",children:[!m&&Object(c.jsx)("div",{className:"text-center",children:Object(c.jsx)("img",{src:se,alt:"Loading...",style:{maxWidth:150}})}),m&&Object(c.jsxs)("div",{children:["prospect"===K&&Object(c.jsx)(W,{workingDB:m}),("actual"===K||"expected"===K)&&Object(c.jsx)(X,{selectedPanel:K,addAlert:ye,authToken:i.token,expenditures:k,setExpenditures:S,isLoaded:U,onRefresh:Ce,setIsLoaded:z,workingDB:m,setWorkingDB:f,workingMonth:g,setExpenditureForModal:Ne,setShowExpenditureModal:be}),"months"===K&&Object(c.jsx)($,{isLoaded:U,months:P,workingMonth:g,setWorkingMonth:v}),Object(c.jsx)(E,{isLoaded:U,selectedPanel:K,setPanel:we})]})]}),he&&Object(c.jsx)(te,{show:he,expenditure:ve,isExpected:fe,authToken:i.token,expenditures:k,setExpenditures:S,isLoaded:U,setIsLoaded:z,setShowExpenditureModal:be,workingDB:m}),de&&Object(c.jsx)(ae,{show:de,authToken:i.token,incomes:C,setIncomes:D,isLoaded:U,setIsLoaded:z,setShowActualMoneyOrIncomeModal:le,workingDB:m,getWorkingDB:Se,setWorkingDB:f,workingMonth:g})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(re,{})}),document.getElementById("root")),de()}},[[62,1,2]]]);
//# sourceMappingURL=main.663ebaa8.chunk.js.map